{{ if .Site.Params.waline.enable }}
<div id="waline"></div>
<script type="module">
    import { init } from 'https://cdn.jsdelivr.net/npm/@waline/client/dist/waline.mjs';

    init({
        el: '#waline',
        serverURL: '{{ .Site.Params.waline.serverURL }}',
        lang: '{{ .Site.Params.waline.lang }}',
        dark: '{{ .Site.Params.waline.dark }}',
        login: '{{ .Site.Params.waline.login }}',
        pageview: {{ .Site.Params.waline.pageview }},
        comment: {{ .Site.Params.waline.comment }},
        placeholder: '{{ .Site.Params.waline.placeholder }}',
        path: window.location.pathname,
        requiredMeta: [],
        reaction: false,
        errorHandler: (err) => {
            console.error(err);
            const errorDiv = document.createElement('div');
            errorDiv.style.color = 'red';
            errorDiv.textContent = '评论系统加载失败，请稍后再试';
            document.getElementById('waline').appendChild(errorDiv);
        }
    });
</script>
{{ end }} 