{{ define "main" }}
<div class="archive-list">
    {{ $pages := where .Site.RegularPages "Type" "in" .Site.Params.mainSections }}
    {{ $groupedPages := $pages.GroupByDate "2006" }}
    
    {{ range $groupedPages }}
    <div class="archive-year">
        <h2 class="archive-year-title">{{ .Key }}</h2>
        {{ range .Pages }}
        <div class="archive-item">
            <div class="archive-date">{{ partial "archive-date.html" . }}</div>
            <div class="archive-title">
                <a href="{{ .RelPermalink }}">{{ .Title }}</a>
            </div>
        </div>
        {{ end }}
    </div>
    {{ end }}
</div>
{{ end }} 